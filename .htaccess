# Enable rewriting
RewriteEngine On
RewriteBase /gadgetstore_ecommerce/

# 1. Redirect index.php to root
RewriteCond %{THE_REQUEST} \s/index\.php [NC]
RewriteRule ^index\.php$ /gadgetstore_ecommerce/ [R=301,L]

# 2. Remove .php extension from URLs (cart.php → /cart)
RewriteCond %{THE_REQUEST} \s/([^.]+)\.php [NC]
RewriteRule ^([^.]+)\.php$ /gadgetstore_ecommerce/$1 [R=301,L]

# Internally map /cart → cart.php, /checkout → checkout.php, etc.
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([^/]+)/?$ $1.php [L]

# 3. Rewrite search queries
# /search/iphone → index.php?search=iphone
RewriteRule ^search/([^/]+)/?$ index.php?search=$1 [L,QSA]

# Default document
DirectoryIndex index.php
